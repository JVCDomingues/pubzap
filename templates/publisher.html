{% extends 'base.html' %}

{% block title %}publisher{% endblock title %}

{% block content %}
<br>
<div class="row">
    <div class="col-md-12">
        <h3>Send Message</h3>
    </div>
</div>

<br>

<div class="row">
    <div class="col-md-12">
        <form action="" method="POST">
            <div class="form-group">
                <label for="message">Message text</label>
                <textarea class="form-control" id="message" name="message" rows="3"></textarea>
            </div>
            <div class="form-group">
                <button type="submit" class="btn btn-primary mb-2">Submit</button>
            </div>
        </form>
    </div>
</div>

<br>

<div class="row">
    <div class="col-md-12">
        {% if response %}
            {% if response.status_code == 201 %}
                <div class="alert alert-success" role="alert">
                    Mensagem com ID <strong>{{ response.content }}</strong> entregue com sucesso!
                </div>
            {% else %}
                <div class="alert alert-danger" role="alert">
                    {{ response.content }}, <strong>{{ response.status_code }}</strong>
                </div>
                <div class="form-group">
                    <a class="btn btn-dark mt-3" href="/create_topic/{{ response.topic }}" target="_blank">
                        Create topic/subscription
                    </a>
                </div>
            {% endif %}
        {% endif %}

    </div>
</div>
{% endblock content %}